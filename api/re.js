"use strict";var L=Object.defineProperty;var c=(e,r)=>L(e,"name",{value:r,configurable:!0});var O=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var q=O((F,j)=>{"use strict";var J={},B=c(e=>{J.lodash=e.require("lodash")},"setDependencies");j.exports={setDependencies:B,dependencies:J}});var E=O((H,S)=>{"use strict";var x=c(e=>(r,s,u,o)=>{let m=c((n,p)=>Object.keys(n).reduce((a,t)=>{let i=p(n[t],t);return e.isEmpty(i)?a:{...a,[t]:i}},{}),"mapProperties"),y=c((n,p)=>Array.isArray(n)?n.map((a,t)=>p(a,t)).filter(a=>!e.isEmpty(a)):e.isPlainObject(n)?p(n,0):n,"mapItems"),f=c((n,p,a)=>{let t=y(p,a);if(!Array.isArray(t)||(t=t.filter(l=>l.properties),t.length>1))return t;let i=t[0];return e.has(i,"properties")?(e.has(n,"properties")||(n.properties={}),Object.keys(i.properties).forEach(l=>{e.has(n,"properties."+l)||(n.properties[l]=i.properties[l])}),[]):t},"mapChoices"),d=c((n,p,a)=>n.reduce((t,i)=>{if(!t[i])return t;let l=a(t[i],i);if(e.isEmpty(l)){let A=Object.assign({},t);return delete A[i],A}return Object.assign({},t,{[i]:l})},p),"applyTo");if(!e.isPlainObject(r))return r;let h=Object.assign({},r),b=e.partial(x(e),e,h,u),v=["properties","definitions","patternProperties"],w=["items","not"],C=["oneOf","allOf","anyOf"],D=d(v,h,e.partial(m,e,b)),g=d(w,D,e.partial(y,e,b)),I=d(C,g,e.partial(f,g,e,b));return u(I,s,o)},"mapJsonSchema");S.exports=x});var k=O((M,P)=>{"use strict";var{setDependencies:R}=q(),T=E(),U=c((e,r,s,u)=>{try{R(u);let o=u.require("lodash"),m=JSON.parse(e.jsonSchema),y=T(o)(m,{},(f,d,h)=>f.type==="array"&&!f.subtype?{...f,subtype:W(o,f)}:f);s(null,{...e,jsonSchema:JSON.stringify(y)})}catch(o){let m={message:o.message,stack:o.stack};r.log("error",m,"Remove nulls from JSON Schema"),s(m)}},"adaptJsonSchema"),W=c((e,r)=>{let s=c(o=>`array<${o}>`,"subtype");if(!r.items)return;if(Array.isArray(r.items)&&e.uniq(r.items.map(o=>o.type)).length>1)return s("union");let u=Array.isArray(r.items)?r.items[0]:r.items;if(u){switch(u.type){case"string":case"text":return s("txt");case"number":case"numeric":case"integer":return s("num");case"interval":return s("intrvl");case"object":case"struct":return s("struct");case"array":return s("array");case"map":return s("map");case"union":return s("union");case"timestamp":return s("ts");case"date":return s("date")}if(u.items)return s("array");if(u.properties)return s("struct")}},"getArraySubtypeByChildren");P.exports={adaptJsonSchema:U}});var{adaptJsonSchema:$}=k();module.exports={adaptJsonSchema:$};
